# –ú—ñ–≥—Ä–∞—Ü—ñ—è –º–µ–¥—ñ–∞ –∑ S3 –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–µ —Å—Ö–æ–≤–∏—â–µ

–¶–µ–π –Ω–∞–±—ñ—Ä —Å–∫—Ä–∏–ø—Ç—ñ–≤ –¥–æ–ø–æ–º–æ–∂–µ –≤–∞–º –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤—Å—ñ –º–µ–¥—ñ–∞ —Ñ–∞–π–ª–∏ –∑ AWS S3 —É –ª–æ–∫–∞–ª—å–Ω—É –ø–∞–ø–∫—É `public/media` —Ç–∞ –æ–Ω–æ–≤–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é Payload CMS.

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –º—ñ–≥—Ä–∞—Ü—ñ—ó –≤–∏–∫–æ–Ω–∞–π—Ç–µ:

```bash
pnpm run migrate:media
```

–¶–µ–π —Å–∫—Ä–∏–ø—Ç –≤–∏–∫–æ–Ω–∞—î –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∫—Ä–æ–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

## üìã –ü–æ–∫—Ä–æ–∫–æ–≤–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è

–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é –ø–æ–∫—Ä–æ–∫–æ–≤–æ:

### 1. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–µ–¥—ñ–∞ –∑ S3

```bash
pnpm run download:media
```

**–ü–µ—Ä–µ–¥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —É –≤–∞—Å —î –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:**

- `S3_BUCKET_NAME` - –Ω–∞–∑–≤–∞ S3 bucket
- `AWS_REGION` - —Ä–µ–≥—ñ–æ–Ω AWS
- `S3_ACCESS_KEY_ID` - Access Key ID
- `S3_SECRET_ACCESS_KEY` - Secret Access Key

### 2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

```bash
pnpm add @payloadcms/storage-local
```

### 3. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó Payload

```bash
pnpm run update:config
```

### 4. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω—å –Ω–∞ –º–µ–¥—ñ–∞ –≤ –∫–æ–¥—ñ

```bash
pnpm run update:references
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

- `download-s3-media.mjs` - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –∑ S3
- `update-payload-config.mjs` - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó Payload
- `update-media-references.mjs` - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω—å –≤ –∫–æ–¥—ñ
- `migrate-s3-to-local.mjs` - –≥–æ–ª–æ–≤–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –º—ñ–≥—Ä–∞—Ü—ñ—ó

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –∑–∞—É–≤–∞–∂–µ–Ω–Ω—è

1. **–†–µ–∑–µ—Ä–≤–Ω–∞ –∫–æ–ø—ñ—è**: –°–∫—Ä–∏–ø—Ç —Å—Ç–≤–æ—Ä–∏—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É –∫–æ–ø—ñ—é `payload.config.ts.backup`
2. **–õ–æ–∫–∞–ª—å–Ω–∞ –ø–∞–ø–∫–∞**: –í—Å—ñ –º–µ–¥—ñ–∞ —Ñ–∞–π–ª–∏ –±—É–¥—É—Ç—å –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –≤ `public/media/`
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫**: –ü—ñ—Å–ª—è –º—ñ–≥—Ä–∞—Ü—ñ—ó –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä
4. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**: –û–±–æ–≤'—è–∑–∫–æ–≤–æ –ø—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –≤—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó —Å–∞–π—Ç—É –ø—ñ—Å–ª—è –º—ñ–≥—Ä–∞—Ü—ñ—ó

## üîÑ –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ S3

–Ø–∫—â–æ —â–æ—Å—å –ø—ñ–¥–µ –Ω–µ —Ç–∞–∫, –≤–∏ –º–æ–∂–µ—Ç–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ S3:

1. –í—ñ–¥–Ω–æ–≤—ñ—Ç—å `payload.config.ts` –∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó
2. –í–∏–¥–∞–ª—ñ—Ç—å `@payloadcms/storage-local`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä

## üêõ –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü–æ–º–∏–ª–∫–∞ "–í—ñ–¥—Å—É—Ç–Ω—ñ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞"

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —É –≤–∞—Å —î —Ñ–∞–π–ª `.env` –∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–º–∏ –∑–º—ñ–Ω–Ω–∏–º–∏ –¥–ª—è S3.

### –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:

- –ü—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å S3 credentials
- –î–æ—Å—Ç—É–ø –¥–æ bucket
- –ú–µ—Ä–µ–∂–µ–≤–µ –∑'—î–¥–Ω–∞–Ω–Ω—è

### –ü–æ–º–∏–ª–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –º–∞—î—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å —É —Ñ–∞–π–ª–∏ –ø—Ä–æ–µ–∫—Ç—É.

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–ü—Ä–∏ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—ñ –ø—Ä–æ–±–ª–µ–º —Å—Ç–≤–æ—Ä—ñ—Ç—å issue –∞–±–æ –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –∫–æ–º–∞–Ω–¥–∏ —Ä–æ–∑—Ä–æ–±–∫–∏.
